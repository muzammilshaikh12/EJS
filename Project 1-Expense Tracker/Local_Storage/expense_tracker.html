<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title >My Expense Tracker</title>
    <!-- <link rel="stylesheet" href="style.css"> -->
</head>
   
<body>

    <div class="wrapper" style="text-align:center; border:2px solid rgb(173, 174, 176); margin-left:700px; margin-right:700px;background-color:rgb(181, 211, 228);border-radius: 10px;">
        <h1 style="text-align:center;color:rgb(24, 31, 46)">My Expense Tracker <style></style></h1>
        <hr width="100%" size="6px" >
   <label >My Expense Amount:</label> 
   <input type="number" id="amount"><br>
   <br>
   <label >Choose Description:</label> 
    <input type="text" id="des"> <br>
    <br>
   <label s >Choose a category:</label> 
   <select    id="cat"> <br>
    <option>Movie</option>
    <option>Fuel</option>
    <option>Food</option>
    <option>Miscellanous</option><br>

    <input type="button" value="Add Expense" onclick="savetoLocalstorage(event)" style="background-color:rgb(24, 31, 46);color:whitesmoke">
    

    <ul id="ul" style="color:rgb(6, 6, 6)">
        
    </ul>

   </div>

    <script>
       
function savetoLocalstorage(event) {
                event.preventDefault();
                
            let userDetails = {
                My_Expense_Amount : document.getElementById('amount').value,
                Description: document.getElementById('des').value,
                category :document.getElementById('cat').value
              
            }

            let userDetails_serialized=JSON.stringify(userDetails)  
           
            localStorage.setItem(userDetails.My_Expense_Amount , userDetails_serialized)
            showNewUseronScreen(userDetails)
        }
         
        
        
        function showNewUseronScreen(userDetails){
             const d=document.getElementById('ul')
             const li= `<li id="${userDetails.My_Expense_Amount}"> ${userDetails.My_Expense_Amount},${userDetails.Description},${userDetails.category}
              <button onclick = editUser('${userDetails.My_Expense_Amount}','${userDetails.Description}','${userDetails.category}')> Edit </button> 
              <button onclick = deleteUser('${userDetails.My_Expense_Amount}') style="color:white;background-color:rgb(24,31,46)"> Delete </button> 
               </li>`
      d.innerHTML=d.innerHTML + li
            }
         

            function deleteUser(user) {
                let child = document.getElementById(user)
                let parent=document.getElementById('ul')
                parent.removeChild(child)
                localStorage.removeItem(user)
            }

            function editUser(money,des,cat) {
                
            document.getElementById('amount').value = money
            document.getElementById('des').value = des
            document.getElementById('cat').value = cat

            deleteUser(money)
            
            }

  window.addEventListener("DOMContentLoaded",()=>{
    localStorage.getItem(user)
  })
          

    </script>
</body>
</html>